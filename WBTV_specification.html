<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN" "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><!--This file was converted to xhtml by LibreOffice - see http://cgit.freedesktop.org/libreoffice/core/tree/filter/source/xslt for the code.--><head profile="http://dublincore.org/documents/dcmi-terms/"><meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8"/><title xml:lang="en-US">WBTV Version 1 Protocol Specification</title><meta name="DCTERMS.title" content="WBTV Version 1 Protocol Specification" xml:lang="en-US"/><meta name="DCTERMS.language" content="en-US" scheme="DCTERMS.RFC4646"/><meta name="DCTERMS.source" content="http://xml.openoffice.org/odf2xhtml"/><meta name="DCTERMS.issued" content="2014-03-27T22:15:53" scheme="DCTERMS.W3CDTF"/><meta name="DCTERMS.contributor" content="Daniel Black"/><meta name="DCTERMS.modified" content="2014-07-30T22:42:55.883481005" scheme="DCTERMS.W3CDTF"/><meta name="DCTERMS.provenance" content="" xml:lang="en-US"/><meta name="DCTERMS.subject" content="Protocol Spec," xml:lang="en-US"/><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" hreflang="en"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" hreflang="en"/><link rel="schema.DCTYPE" href="http://purl.org/dc/dcmitype/" hreflang="en"/><link rel="schema.DCAM" href="http://purl.org/dc/dcam/" hreflang="en"/><style type="text/css">
	@page {  }
	table { border-collapse:collapse; border-spacing:0; empty-cells:show }
	td, th { vertical-align:top; font-size:12pt;}
	h1, h2, h3, h4, h5, h6 { clear:both }
	ol, ul { margin:0; padding:0;}
	li { list-style: none; margin:0; padding:0;}
	<!-- "li span.odfLiEnd" - IE 7 issue-->
	li span. { clear: both; line-height:0; width:0; height:0; margin:0; padding:0; }
	span.footnodeNumber { padding-right:1em; }
	span.annotation_style_by_filter { font-size:95%; font-family:Arial; background-color:#fff000;  margin:0; border:0; padding:0;  }
	* { margin:0;}
	.fr1 { border-style:none; font-size:12pt; margin-bottom:0.0791in; margin-left:0.0791in; margin-right:0.0791in; margin-top:0.0791in; padding:0in; font-family:Times New Roman; vertical-align:top; writing-mode:lr-tb; }
	.fr2 { border-style:none; font-size:12pt; margin-bottom:0.0791in; margin-left:0.0791in; margin-right:0.0791in; margin-top:0.0791in; padding:0in; font-family:Times New Roman; vertical-align:top; writing-mode:lr-tb; }
	.fr3 { border-style:none; font-size:12pt; margin-bottom:0in; margin-left:0.0791in; margin-right:0.0791in; margin-top:0in; padding:0in; font-family:Times New Roman; vertical-align:top; writing-mode:lr-tb; }
	.Code_borderStart { font-size:11pt; font-weight:normal; margin-top:0in; text-align:left ! important; font-family:Linux Libertine Mono; writing-mode:page; background-color:transparent; padding:0.0201in; border-width:0.0133cm; border-style:solid; border-color:#000000; padding-bottom:0in;  border-bottom-style:none; }
	.Code { font-size:11pt; font-weight:normal; text-align:left ! important; font-family:Linux Libertine Mono; writing-mode:page; background-color:transparent; padding:0.0201in; border-width:0.0133cm; border-style:solid; border-color:#000000; padding-bottom:0in; padding-top:0in;  border-top-style:none; border-bottom-style:none; }
	.Code_borderEnd { font-size:11pt; font-weight:normal; margin-bottom:0in; text-align:left ! important; font-family:Linux Libertine Mono; writing-mode:page; background-color:transparent; padding:0.0201in; border-width:0.0133cm; border-style:solid; border-color:#000000; padding-top:0in;  border-top-style:none;}
	.Heading_20_1 { font-size:24pt; margin-bottom:0in; margin-top:0in; text-align:center ! important; font-family:Quivira; writing-mode:page; font-weight:normal; }
	.Heading_20_2 { font-size:20pt; margin-bottom:0in; margin-top:0in; text-align:center ! important; font-family:Quivira; writing-mode:page; font-weight:normal; }
	.Heading_20_3_borderStart { font-size:14pt; margin-top:0.05in; text-align:left ! important; font-family:Quivira; writing-mode:page; background-color:#c0c0c0; padding:0.0201in; border-width:0.0133cm; border-style:solid; border-color:#000000; font-weight:normal; padding-bottom:0.0402in;  border-bottom-style:none; }
	.Heading_20_3 { font-size:14pt; text-align:left ! important; font-family:Quivira; writing-mode:page; background-color:#c0c0c0; padding:0.0201in; border-width:0.0133cm; border-style:solid; border-color:#000000; font-weight:normal; padding-bottom:0.0402in; padding-top:0.05in;  border-top-style:none; border-bottom-style:none; }
	.Heading_20_3_borderEnd { font-size:14pt; margin-bottom:0.0402in; text-align:left ! important; font-family:Quivira; writing-mode:page; background-color:#c0c0c0; padding:0.0201in; border-width:0.0133cm; border-style:solid; border-color:#000000; font-weight:normal; padding-top:0.05in;  border-top-style:none;}
	.Heading_20_4_borderStart { font-size:12pt; margin-top:0.05in; text-align:left ! important; font-family:Quivira; writing-mode:page; background-color:#e6e6e6; padding:0.0201in; border-width:0.0133cm; border-style:solid; border-color:#000000; font-weight:normal; padding-bottom:0.0598in;  border-bottom-style:none; }
	.Heading_20_4 { font-size:12pt; text-align:left ! important; font-family:Quivira; writing-mode:page; background-color:#e6e6e6; padding:0.0201in; border-width:0.0133cm; border-style:solid; border-color:#000000; font-weight:normal; padding-bottom:0.0598in; padding-top:0.05in;  border-top-style:none; border-bottom-style:none; }
	.Heading_20_4_borderEnd { font-size:12pt; margin-bottom:0.0598in; text-align:left ! important; font-family:Quivira; writing-mode:page; background-color:#e6e6e6; padding:0.0201in; border-width:0.0133cm; border-style:solid; border-color:#000000; font-weight:normal; padding-top:0.05in;  border-top-style:none;}
	.P1 { font-size:12pt; font-family:Linux Libertine; writing-mode:page; text-align:left ! important; }
	.P10 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0.0402in; font-family:Linux Libertine; writing-mode:page; }
	.P11 { font-size:14pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0.0402in; font-family:Linux Libertine Display; writing-mode:page; text-align:justify ! important; color:#000000; letter-spacing:normal; font-style:normal; font-weight:normal; }
	.P12 { font-size:22pt; font-weight:normal; margin-bottom:0in; margin-top:0in; text-align:center ! important; font-family:Quivira; writing-mode:page; }
	.P13 { font-size:12pt; font-family:Linux Libertine; writing-mode:page; font-weight:normal; }
	.P14 { font-size:12pt; font-family:Linux Libertine; writing-mode:page; font-style:normal; }
	.P15 { font-size:20pt; font-weight:normal; margin-bottom:0in; margin-top:0in; text-align:center ! important; font-family:Quivira; writing-mode:page; }
	.P16 { font-size:20pt; font-weight:normal; margin-bottom:0in; margin-top:0in; text-align:center ! important; font-family:Quivira; writing-mode:page; }
	.P17_borderStart { background-color:transparent; border-width:0.0133cm; border-style:solid; border-color:#000000; font-size:11pt; font-weight:normal; margin-top:0in; padding:0.0201in; text-align:left ! important; font-family:Linux Libertine Mono; writing-mode:page; font-style:normal; padding-bottom:0in;  border-bottom-style:none; }
	.P17 { background-color:transparent; border-width:0.0133cm; border-style:solid; border-color:#000000; font-size:11pt; font-weight:normal; padding:0.0201in; text-align:left ! important; font-family:Linux Libertine Mono; writing-mode:page; font-style:normal; padding-bottom:0in; padding-top:0in;  border-top-style:none; border-bottom-style:none; }
	.P17_borderEnd { background-color:transparent; border-width:0.0133cm; border-style:solid; border-color:#000000; font-size:11pt; font-weight:normal; margin-bottom:0in; padding:0.0201in; text-align:left ! important; font-family:Linux Libertine Mono; writing-mode:page; font-style:normal; padding-top:0in;  border-top-style:none;}
	.P18 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0in; font-family:Linux Libertine; writing-mode:page; }
	.P19 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0in; font-family:Linux Libertine; writing-mode:page; text-align:left ! important; }
	.P20 { font-size:13pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0in; font-family:Linux Libertine Display; writing-mode:page; color:#000000; letter-spacing:normal; font-style:normal; text-decoration:underline; font-weight:normal; }
	.P21 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0in; font-family:Linux Libertine; writing-mode:page; }
	.P22 { font-size:20pt; font-weight:normal; margin-bottom:0in; margin-top:0in; text-align:center ! important; font-family:Quivira; writing-mode:page; }
	.P23 { font-size:20pt; font-weight:normal; margin-bottom:0in; margin-top:0in; text-align:center ! important; font-family:Quivira; writing-mode:page; }
	.P24 { font-size:20pt; font-weight:normal; margin-bottom:0in; margin-top:0in; text-align:center ! important; font-family:Quivira; writing-mode:page; }
	.P25 { font-size:20pt; font-weight:normal; margin-bottom:0in; margin-top:0in; text-align:center ! important; font-family:Quivira; writing-mode:page; }
	.P26 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0.0402in; font-family:Linux Libertine; writing-mode:page; }
	.P27 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0.0402in; font-family:Linux Libertine; writing-mode:page; text-align:justify ! important; font-weight:bold; }
	.P28 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0.0402in; font-family:Linux Libertine; writing-mode:page; font-weight:bold; }
	.P29 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0.0402in; font-family:Linux Libertine; writing-mode:page; font-style:normal; }
	.P3 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0.0402in; font-family:Linux Libertine; writing-mode:page; text-align:justify ! important; }
	.P30 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0.0402in; font-family:Linux Libertine; writing-mode:page; }
	.P31 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0.0402in; font-family:Linux Libertine; writing-mode:page; }
	.P32 { font-size:13pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0.0402in; font-family:Linux Libertine Display; writing-mode:page; color:#000000; letter-spacing:normal; font-style:normal; text-decoration:underline; font-weight:normal; }
	.P33 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0.0402in; font-family:Linux Libertine; writing-mode:page; }
	.P34 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0.0402in; font-family:Linux Libertine; writing-mode:page; }
	.P35 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0.0402in; font-family:Linux Libertine; writing-mode:page; }
	.P36 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0.0402in; font-family:Linux Libertine; writing-mode:page; }
	.P37 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0in; font-family:Linux Libertine; writing-mode:page; }
	.P38 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0in; font-family:Linux Libertine; writing-mode:page; }
	.P39 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0in; font-family:Linux Libertine; writing-mode:page; text-align:justify ! important; font-weight:bold; }
	.P4 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0.0402in; font-family:Linux Libertine; writing-mode:page; text-align:justify ! important; }
	.P40 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0in; font-family:Linux Libertine; writing-mode:page; font-weight:bold; }
	.P41 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0in; font-family:Linux Libertine; writing-mode:page; }
	.P42 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0in; font-family:Linux Libertine; writing-mode:page; }
	.P43 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0in; font-family:Linux Libertine; writing-mode:page; }
	.P44 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0in; font-family:Linux Libertine; writing-mode:page; }
	.P45 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0in; font-family:Linux Libertine; writing-mode:page; }
	.P46 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0in; font-family:Linux Libertine; writing-mode:page; }
	.P47_borderStart { background-color:#c0c0c0; border-width:0.0133cm; border-style:solid; border-color:#000000; font-size:14pt; font-weight:normal; margin-top:0.05in; padding:0.0201in; text-align:left ! important; font-family:Quivira; writing-mode:page; padding-bottom:0.0402in;  border-bottom-style:none; }
	.P47 { background-color:#c0c0c0; border-width:0.0133cm; border-style:solid; border-color:#000000; font-size:14pt; font-weight:normal; padding:0.0201in; text-align:left ! important; font-family:Quivira; writing-mode:page; padding-bottom:0.0402in; padding-top:0.05in;  border-top-style:none; border-bottom-style:none; }
	.P47_borderEnd { background-color:#c0c0c0; border-width:0.0133cm; border-style:solid; border-color:#000000; font-size:14pt; font-weight:normal; margin-bottom:0.0402in; padding:0.0201in; text-align:left ! important; font-family:Quivira; writing-mode:page; padding-top:0.05in;  border-top-style:none;}
	.P5 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0.0402in; font-family:Linux Libertine; writing-mode:page; text-align:justify ! important; font-weight:bold; }
	.P6 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0.0402in; font-family:Linux Libertine; writing-mode:page; text-align:justify ! important; font-weight:normal; }
	.P7 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0.0402in; font-family:Linux Libertine; writing-mode:page; font-style:normal; }
	.P8 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0.0402in; font-family:Linux Libertine; writing-mode:page; font-style:normal; font-weight:normal; }
	.P9 { font-size:12pt; margin-bottom:0in; margin-left:0in; margin-right:0.0098in; margin-top:0in; text-indent:0.0402in; font-family:Linux Libertine; writing-mode:page; }
	.Preformatted_20_Text_borderStart { font-size:10pt; font-family:Courier New; writing-mode:page; margin-top:0in; padding:0.0201in; border-width:0.0133cm; border-style:solid; border-color:#000000; padding-bottom:0in;  border-bottom-style:none; }
	.Preformatted_20_Text { font-size:10pt; font-family:Courier New; writing-mode:page; padding:0.0201in; border-width:0.0133cm; border-style:solid; border-color:#000000; padding-top:0in; padding-bottom:0in;  border-top-style:none; border-bottom-style:none; }
	.Preformatted_20_Text_borderEnd { font-size:10pt; font-family:Courier New; writing-mode:page; margin-bottom:0in; padding:0.0201in; border-width:0.0133cm; border-style:solid; border-color:#000000; padding-top:0in;  border-top-style:none;}
	.Standard { font-size:12pt; font-family:Linux Libertine; writing-mode:page; }
	.Text_20_body { font-size:12pt; font-family:Linux Libertine; writing-mode:page; margin-left:0in; margin-right:0.0098in; margin-top:0in; margin-bottom:0in; text-indent:0.0402in; }
	.Table1 { width:3.3625in; float:none; }
	.Table2 { width:3.3625in; float:none; }
	.Table3 { width:3.3625in; float:none; }
	.Table4 { width:3.3625in; float:none; }
	.Table5 { width:3.3625in; float:none; }
	.Table6 { width:3.3625in; float:none; }
	.Table1_A1 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-width:thin; border-top-style:solid; border-top-color:#000000; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table1_A2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table1_B1 { padding:0.0382in; border-width:thin; border-style:solid; border-color:#000000; }
	.Table1_B2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-width:thin; border-right-style:solid; border-right-color:#000000; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table2_A1 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-width:thin; border-top-style:solid; border-top-color:#000000; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table2_A2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table2_B1 { padding:0.0382in; border-width:thin; border-style:solid; border-color:#000000; }
	.Table2_B2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-width:thin; border-right-style:solid; border-right-color:#000000; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table3_A1 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-width:thin; border-top-style:solid; border-top-color:#000000; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table3_A2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table3_B1 { padding:0.0382in; border-width:thin; border-style:solid; border-color:#000000; }
	.Table3_B2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-width:thin; border-right-style:solid; border-right-color:#000000; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table4_A1 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-width:thin; border-top-style:solid; border-top-color:#000000; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table4_A2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table4_B1 { padding:0.0382in; border-width:thin; border-style:solid; border-color:#000000; }
	.Table4_B2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-width:thin; border-right-style:solid; border-right-color:#000000; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table5_A1 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-width:thin; border-top-style:solid; border-top-color:#000000; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table5_A2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table5_B1 { padding:0.0382in; border-width:thin; border-style:solid; border-color:#000000; }
	.Table5_B2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-width:thin; border-right-style:solid; border-right-color:#000000; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table6_A1 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-width:thin; border-top-style:solid; border-top-color:#000000; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table6_A2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table6_B1 { padding:0.0382in; border-width:thin; border-style:solid; border-color:#000000; }
	.Table6_B2 { padding:0.0382in; border-left-width:thin; border-left-style:solid; border-left-color:#000000; border-right-width:thin; border-right-style:solid; border-right-color:#000000; border-top-style:none; border-bottom-width:thin; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table1_A { width:0.9208in; }
	.Table1_B { width:2.4417in; }
	.Table2_A { width:1.2278in; }
	.Table2_B { width:2.1347in; }
	.Table3_A { width:1.25in; }
	.Table3_B { width:2.1125in; }
	.Table4_A { width:1.2278in; }
	.Table4_B { width:2.1347in; }
	.Table5_A { width:1.25in; }
	.Table5_B { width:2.1125in; }
	.Table6_A { width:1.6813in; }
	.T1 { font-family:Linux Libertine; }
	.T10 { font-style:normal; font-weight:normal; }
	.T11 { text-decoration:underline; font-weight:bold; }
	.T13 { color:#000000; font-family:Linux Libertine Display; font-size:14pt; letter-spacing:normal; font-style:normal; text-decoration:underline; font-weight:normal; }
	.T2 { font-family:Cardinal; }
	.T5 { font-weight:normal; }
	.T6 { font-style:italic; }
	.T7 { font-style:italic; text-decoration:underline; font-weight:normal; }
	.T8 { font-style:italic; font-weight:normal; }
	.T9 { font-style:normal; }
	<!-- ODF styles with no properties representable as CSS -->
	.Endnote_20_Symbol .Footnote_20_Symbol .T12 .T14 .T15 .T16 .T17 .T18 .T19 .T20 .T21  { }
	</style></head><body dir="ltr" style="max-width:8.5in;margin-top:0.7874in; margin-bottom:0.7874in; margin-left:0.7874in; margin-right:0.7874in; writing-mode:lr-tb; "><h1 class="Heading_20_1"><a id="a__WBTV_1___Publish-Subscribe_for_Embedded_Devices"><span/></a><!--Next 'div' is emulating the top hight of a draw:frame.--><!--Next '
			div' is a draw:frame.
		--><div style="width:6.8445in; padding:0;  float:left; position:relative; left:0.2291cm; " class="fr1" id="Frame1"><!--Next 'div' was a 'draw:text-box'.--><div style="min-height:0.5043in;"><h1 class="P12"><a id="a__WBTV_1___Publish-Subscribe_for_Embedded_Devices"><span/></a>WBTV 1 : Publish-Subscribe for Embedded Devices</h1></div></div><div style="clear:both; line-height:0; width:0; height:0; margin:0; padding:0;"> </div></h1><h2 class="Heading_20_2"><a id="a__Introduction"><span/></a>Introduction</h2><p class="P3">This page presents a simple protocol for realizing publish-subscribe messaging in small low cost embedded devices using ordinary UART(8-n-1) over any wired-AND physical layer.</p><p class="P3">The protocol can be implemented in about 3K of memory+ 70 bytes of RAM.</p><p class="P3">The protocol has no special dependence on timing of byte arrivals and does not rely on timeouts to detect a node that has failed during transmission. </p><p class="P5">Where legally possible, I place this document and protocol into the Public Domain. Elsewhere I release this work under the Creative Commons Zero License.</p><h2 class="Heading_20_2"><a id="a__Semantics"><span/></a>Semantics</h2><p class="P3">Each message can be thought of as pushing a “message” made of “segments” to a “channel”. Both the message segments and the name of the channel are arbitrary 8 bit strings. </p><p class="P3">All channels with &lt;=6 byte names are reserved for future standardization. </p><p class="P3">To avoid conflicts, channel names should be based on URLs or UUIDs or some other unique string, but can simply be chosen arbitrarily when global compatibility is not required.</p><p class="P3">Channels can be thought of as inputs or outputs or both of the node that “owns” the channel. </p><p class="P3">Devices can use a common prefix for all their owned channels but are not required to.</p><h2 class="Heading_20_2"><a id="a__Message_Structure"><span/></a>Message Structure</h2><p class="P3">Every message begins with an exclamation point, followed by the N byte channel name, then a tilde as a separator , then the data, then a 2 byte </p><p class="P3"> </p><p class="P3">checksum, then a closing newline(ASCII 10).  All data should always be little-endian.</p><p class="P3">Should the message contain multiple segments, separate them with un-escaped tildes.</p><h2 class="Heading_20_2"><a id="a__Escaping"><span/></a>Escaping</h2><p class="P3">Should a control symbol(!, ~, or \n) need to appear in data or  channel name, the backslash is used to escape it. The character following a  non-escaped backslash(even another backslash) is processed as a literal character.</p><h2 class="Heading_20_2"><a id="a__Checksum"><span/></a>Checksum</h2><p class="P3">The checksum is a fletcher-256 sum, as defined by the following function :</p><p class="Preformatted_20_Text_borderStart">set fast and slow to zero</p><p class="Preformatted_20_Text">then for each byte to be hashed:</p><p class="Preformatted_20_Text"><span> increment slow by the byte mod 256</span></p><p class="Preformatted_20_Text"><span> increment fast by slow mod 256</span></p><p class="P13"> </p><p class="P13">Calculated over all the bytes of the raw channel, the tilde, and the raw message, but not including the escapes or any other control characters except for the tilde. The checksum is appended to the message slow byte first, making the full message structure(control chars underlined):</p><p class="P13"> </p><p class="Preformatted_20_Text"><span class="T11">!</span><span class="T5">&lt;channel&gt;</span><span class="T7">~</span><span class="T5">&lt;message&gt;&lt;fast&gt;&lt;slow&gt;</span><span class="T11">\n</span></p><h2 class="Heading_20_2"><a id="a__CSMA"><span/></a>CSMA</h2><p class="P3">To remove the need for a bus master, we use the wired-OR Physical Layer and CSMA/CD. Before sending a message, a device must pick a random length of time, and wait until the bus has been free for that time.</p><p class="P3">Devices must also listen while transmitting, and, if they detect a collision(via the wired-or), immediately cease, wait another random period(preferably 2x the initial period) and retry.</p><p class="P3"> </p><p class="P3"> </p><p class="P3"> </p><h2 class="Heading_20_2"><a id="a__WBTV_2__Time_Synchronization_ProtocolIntroduction"><span/></a><!--Next 'div' is emulating the top hight of a draw:frame.--><div style="height:0.014cm;"> </div><!--Next '
			div' is a draw:frame.
		--><div style="width:6.8972in; padding:0;  float:left; position:relative; left:-0.1021cm; " class="fr1" id="Frame3"><!--Next 'div' was a 'draw:text-box'.--><div style="min-height:0.5307in;"><h1 class="Heading_20_1"><a id="a__WBTV_2__Time_Synchronization_Protocol"><span/></a>WBTV 2: Time Synchronization Protocol</h1></div></div><div style="clear:both; line-height:0; width:0; height:0; margin:0; padding:0;"> </div>Introduction</h2><p class="P4">Often there is a need to provide accurate time synchronization to many devices. This document defines a reserved channel for that purpose.</p><p class="P5">Where legally possible, I place this document and protocol into the Public Domain. Elsewhere I release this work under the Creative Commons Zero License.</p><h2 class="Heading_20_2"><a id="a__The_TIME_Channel"><span/></a>The TIME Channel</h2><p class="P3">The TIME channel is reserved for broadcasting messages that represent the current time, as of the leading edge of the start bit of the initial ! In the message. Messages must be timestamps conforming to the following format.</p><h2 class="Heading_20_2"><a id="a__Time_Stamp_Format"><span/></a> Time Stamp Format</h2><p class="Text_20_body">A time stamp contains the following fields, concatenated together, plus any optional fields which may be added, which may be specified in a later document.</p><h3 class="Heading_20_3"><a id="a__UNIX_Time_Stamp"><span/></a>UNIX Time Stamp</h3><p class="Text_20_body">This must be a 64-bit signed integer representing the number of seconds elapsed since 00:00 1 January 1970, excluding leap seconds. This is identical to the 64 bit UNIX time number.</p><p class="Text_20_body">This gives enough precision for all of recorded history until millions of years from now.</p><h3 class="Heading_20_3"><a id="a__Fractional_Part"><span/></a>Fractional Part</h3><p class="Text_20_body">This is a 32 bit unsigned integer representing the   fractional part of the current time multiplied by 2**32. Where the fractional part is unknown, 2**16 should be sent to minimize average error.</p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><p class="P18"> </p><p class="P18"> </p><h3 class="Heading_20_3"><a id="a__Accuracy_Estimate"><span/></a>Accuracy Estimate</h3><p class="Text_20_body">This is an estimate of the accuracy, given as a 8 bit signed integer E followed by am 8 bit unsigned integer M, where the maximum error in seconds is M*(2^E).</p><p class="Text_20_body">This is an extremely simple floating point format  that can only represent positive integers.</p><p class="Text_20_body">The estimate should be conservative, and should be the maximum error the sender is rated to experience across the full range of working conditions.</p><h2 class="Heading_20_2"><a id="a__Device_Behavior"><span/></a>Device Behavior</h2><p class="Text_20_body">Devices should avoid sending time messages during leap seconds, as the time number is ambiguous. Devices should be able to be configured to send time data rather frequently, on the order of up to every several seconds, to account for devices without accurate clocks.</p><p class="Text_20_body">Devices should maintain an estimate of error for their internal clock, and should ignore messages that advertise more error than that, i.e. devices with an accurate estimate of the time should ignore broadcasts from devices with a less accurate estimate of the time.</p><p class="Text_20_body">Devices should not ideally send the time if a time message with equal or better accuracy has been recently sent, specifically, if a receiver with a 2% accurate clock would not have accumulated more error than the internal estimate, there is likely no use in sending the time.</p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><h2 class="Heading_20_2"><a id="a__WBTV_3__Device_Discovery_and_ID_Introduction"><span/></a><!--Next 'div' is emulating the top hight of a draw:frame.--><div style="height:0.014cm;"> </div><!--Next '
			div' is a draw:frame.
		--><div style="width:6.9402in; padding:0;  float:left; position:relative; left:0.0249cm; " class="fr2" id="Frame2"><!--Next 'div' was a 'draw:text-box'.--><div style="min-height:0.4736in;"><h1 class="Heading_20_1"><a id="a__WBTV_3__Device_Discovery_and_ID"><span/></a>WBTV 3: Device Discovery and ID </h1></div></div><div style="clear:both; line-height:0; width:0; height:0; margin:0; padding:0;"> </div> Introduction</h2><p class="P6">Often it becomes necessary to uniquely identify a device, and to enumerate devices on the bus. This document establishes rules for device IDs for WBTV devices.</p><p class="P5">Where legally possible, I place this document and protocol into the Public Domain. Elsewhere I release this work under the Creative Commons Zero License.</p><h2 class="Heading_20_2"><a id="a__The_Device_UUID"><span/></a>The Device UUID</h2><p class="Text_20_body">Every device should, but is not required to, have a 16 byte UUID, which may conform to an official UUID standard of may simply be a random string. A devices UUID should never change, and no two devices should ever have the same UUID. Base 64 should be used for WBTV related UUIDs</p><h2 class="Heading_20_2"><a id="a__Friendly_Name"><span/></a>Friendly Name</h2><p class="Text_20_body">Devices should, but are not required to, be able to accept a user-assigned friendly name. The method of assigning a name should be to send a single packet to channel NAME containing the target device ID followed by the name, then the end of packet.</p><p class="Text_20_body">Names may not be longer than 24 characters, and  must be valid UTF-8. </p><p class="Text_20_body">Devices should announce their names at power-up or on connection, by sending their device UUID followed by their name to the MYNAME channel.</p><h2 class="Heading_20_2"><a id="a__The_STATUS_channel"><span/></a>The STATUS channel</h2><p class="Text_20_body">The channel STATUS is reserved for devices to post short status updates. Messages must be composed of the device's UUID,   then optionally  a newline and a set of space separated keywords, then by a newline and free text.  </p><p class="Text_20_body">Device specific Keywords should begin with “x-”. General Keywords:</p><p class="Text_20_body"> </p><table border="0" cellspacing="0" cellpadding="0" class="Table1"><colgroup><col width="102"/><col width="271"/></colgroup><tr><td style="text-align:left;width:0.9208in; " class="Table1_A1"><p class="Text_20_body">power-warn</p></td><td style="text-align:left;width:2.4417in; " class="Table1_B1"><p class="Text_20_body">Low input voltage</p></td></tr><tr><td style="text-align:left;width:0.9208in; " class="Table1_A2"><p class="Text_20_body">power-fail</p></td><td style="text-align:left;width:2.4417in; " class="Table1_B2"><p class="Text_20_body">Insufficient input power</p></td></tr><tr><td style="text-align:left;width:0.9208in; " class="Table1_A2"><p class="Text_20_body">temp-warn</p></td><td style="text-align:left;width:2.4417in; " class="Table1_B2"><p class="Text_20_body">Overtemperature warning</p></td></tr><tr><td style="text-align:left;width:0.9208in; " class="Table1_A2"><p class="Text_20_body">temp-fault</p></td><td style="text-align:left;width:2.4417in; " class="Table1_B2"><p class="Text_20_body"> Overtemperature fault</p></td></tr><tr><td style="text-align:left;width:0.9208in; " class="Table1_A2"><p class="Text_20_body">volt-warn</p></td><td style="text-align:left;width:2.4417in; " class="Table1_B2"><p class="Text_20_body"> Overvoltage warning</p></td></tr><tr><td style="text-align:left;width:0.9208in; " class="Table1_A2"><p class="Text_20_body">normal</p></td><td style="text-align:left;width:2.4417in; " class="Table1_B2"><p class="Text_20_body"> Normal Operation</p></td></tr></table><p class="Text_20_body">Most devices should not send STATUS messages, however for some devices a heartbeat/still connected signal is important.</p><h2 class="Heading_20_2"><a id="a__The_INFO_channel"><span/></a>The INFO channel</h2><p class="Text_20_body">This channel is used by devices to transmit information about themselves to the network.</p><p class="Text_20_body">Messages must be composed of the device's UUID followed by a newline, followed by the manufacturer name, another newline, the </p><p class="Text_20_body">product name, another newline, then two newlines and any amount of free description.</p><h2 class="Heading_20_2"><a id="a__The_SCAN_channel"><span/></a>The SCAN channel</h2><p class="Text_20_body">Posting a message to the SCAN channel allows one to scan the network for devices. All devices receiving a blank message on this channel should send any information they may have about themselves and channels they own to the network.</p><p class="Text_20_body">Devices should NOT immediately send their info,     but should wait a random time from 0 to 20s or so, during which time they should continue normal operation. Devices should only use SCAN with full knowledge that the network may be heavily trafficked from responses.</p><h2 class="Heading_20_2"><a id="a__WBTV_4__Service_DiscoveryIntroduction"><span/></a><!--Next 'div' is emulating the top hight of a draw:frame.--><div style="height:0.0759cm;"> </div><!--Next '
			div' is a draw:frame.
		--><div style="width:6.8319in; padding:0;  float:left; position:relative; left:0.0249cm; " class="fr3" id="Frame5"><!--Next 'div' was a 'draw:text-box'.--><div style="min-height:0.5484in;"><h1 class="Heading_20_1"><a id="a__WBTV_4__Service_Discovery"><span/></a>WBTV 4: Service Discovery</h1></div></div><div style="clear:both; line-height:0; width:0; height:0; margin:0; padding:0;"> </div>Introduction</h2><p class="P6">Automatic network configuration is a common requirement. Consider a wind speed sensor that sends data on a specific channel, which obviously must be different between devices to allow for multiple devices to be used. How can we know what channel a device sends on?</p><p class="P6">This document defines the concept of a WBTV Service. A WBTV Service is simply a type of service a device can provide on a channel.  The wind speed sensor could be thought of as providing a “wind speed service” on the channel it sends on, and a light controller could be thought of as providing a “Light Control Service”  on the channel that it listens on.</p><p class="P6">Services are identified using UUIDs, and as such anyone can define a service, and publish it formally or informally in the appropriate manner, such as online or in a user manual.</p><p class="P6">Devices that provide services must have a unique UUID that is not shared even between identical devices. This UUID may also be used as a channel name without conflict to save ram.</p><p class="P6">There is no restriction against two compatible services sharing a channel.</p><p class="P5">Where legally possible, I place this document and protocol into the Public Domain. Elsewhere I release this work under the Creative Commons Zero License.</p><h2 class="Heading_20_2"><a id="a__The_SERV_Channel"><span/></a>The SERV Channel</h2><p class="Text_20_body">The SERV channel is reserved for service announcements, which should be made after a device powers up, or in response to SCAN messages. and messages must obey the following format:</p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><h3 class="Heading_20_3"><a id="a__Owning_Device"><span/></a>Owning Device</h3><p class="P9">The first 16 bytes of a SERV message must contain the UUID of the owning device which is providing the advertised service.</p><p class="P9"> </p><h3 class="Heading_20_3"><a id="a__Service_UUID"><span/></a>Service UUID</h3><p class="Text_20_body">The next 16 Bytes must be the UUID of the service being provided.</p><h3 class="Heading_20_3"><a id="a__Channel_Len"><span/></a>Channel Len</h3><p class="Text_20_body">The length of the channel name of the channel on which thee service is provided in bytes, represented as one byte.</p><h3 class="Heading_20_3"><a id="a__Channel"><span/></a>Channel</h3><p class="Text_20_body">The channel name on which the service is provided.</p><h3 class="Heading_20_3"><a id="a__Modifier_Bytes"><span/></a>Modifier Bytes</h3><p class="Text_20_body">Any further data is to be interpreted in a service- and device specific manner.</p><h2 class="Heading_20_2"><a id="a__The_Null_Service"><span/></a>The Null Service</h2><p class="Text_20_body">This is a service with a UUID of 16 zeros. It has no specific definition. One must use the modifier bytes and device documentation to explain the channel.</p><h2 class="P15"><a id="a__The_Struct_Service"><span/></a>The Struct Service</h2><p class="Text_20_body"><span class="T5">This service is used for simple sensors and the like. The modifier bytes must be C source code containing either or both of two struct definitions, one called input and the other output. Data sent </span><span class="T8">to </span><span class="T10">the device must be an unpadded packed little endian instance of </span><span class="T8">input</span><span class="T10">. And data sent from the device must match output. </span></p><p class="P8"> </p><h2 class="Heading_20_2"><a id="a__WBTV_5__The_DAQ_ServiceWBTV-DAQ_Service"><span/></a><!--Next 'div' is emulating the top hight of a draw:frame.--><div style="height:0.1781cm;"> </div><!--Next '
			div' is a draw:frame.
		--><div style="width:7.0173in; padding:0;  float:left; position:relative; left:-0.1781cm; " class="fr3" id="Frame4"><!--Next 'div' was a 'draw:text-box'.--><div style="min-height:0.5008in;"><h1 class="Heading_20_1"><a id="a__WBTV_5__The_DAQ_Service"><span/></a>WBTV 5: The DAQ Service</h1></div></div><div style="clear:both; line-height:0; width:0; height:0; margin:0; padding:0;"> </div>WBTV-DAQ Service</h2><p class="P3">This is a WBTV4 Service that allows a device to act as a data acquisition device.</p><p class="P3"> </p><p class="P19"><span class="T12">Service UUID(hex): </span><span class="T13">0x8A9E60340D8611E4843156F31D5D46B0</span></p><p class="P11"> </p><p class="P5">Where legally possible, I place this document and protocol into the Public Domain. Elsewhere I release this work under the Creative Commons Zero License.</p><h2 class="P15"><a id="a__Modifier_Bytes"><span/></a>Modifier Bytes</h2><p class="Text_20_body">The modifier bytes are to be used to define a set of signals, wherein each line defines a signal(the first line defining signal 0) and so on.</p><p class="Text_20_body">Signals 128+ are reserved, with signal 128 representing a UNIX timestamp, consisting of a 16 bit seconds part and 16 bit fractional part,</p><p class="Text_20_body">This will roll over every 2^16 seconds, which is not an issue because arrival time can be used to disambiguate.</p><p class="Text_20_body">Each line is to consist of, at minimum, a type and a name(which may not include spaces), as in the example:</p><h2 class="Code"><a id="a__u16_Position"><span/></a>u16 Position</h2><p class="Standard">Which would represent a signal called position, which is represented as a 16 bit unsigned integer.</p><h3 class="Heading_20_3"><a id="a__Valid_Types"><span/></a>Valid Types</h3><p class="Text_20_body">The types that are defined in this document are:</p><h4 class="Heading_20_4"><a id="a__u8__u16__u32__u64__u128"><span/></a>u8, u16, u32, u64, u128</h4><p class="Text_20_body">Unsigned integer of specified bit width</p><h4 class="Heading_20_4"><a id="a__i8__i16__i32__i64__i128"><span/></a>i8, i16, i32, i64, i128</h4><p class="Text_20_body">Signed integer of specified bit width.</p><h4 class="Heading_20_4"><a id="a__f16__f32__f64__f128"><span/></a>f16, f32, f64, f128</h4><p class="Text_20_body">IEEE Float of specified bit width.</p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><h3 class="Heading_20_3"><a id="a__Keywords"><span/></a>Keywords</h3><p class="Standard">The name and type may optionally be followed by any number of keywords, some of which may have arguments, That may appear in any order.</p><h4 class="Heading_20_4"><a id="a__in__unit_"><span/></a>in &lt;unit&gt;</h4><p class="Text_20_body">Specifies a unit or interpretation to be used with the channel. &lt;unit&gt; must not contain any spaces, and should where possible be an SI base or derived unit, with ^ used to denote exponentiation where needed e.g. for “mW/cm^2” Example:</p><h2 class="Code"><a id="a__u16_speed_in_mm_s"><span/></a>u16 speed in mm/s</h2><h4 class="Heading_20_4"><a id="a__range__min___max_"><span/></a>range &lt;min&gt;:&lt;max&gt;</h4><p class="Text_20_body">Applies to numeric types. Specifies that the number reported for this signal will be in the specified range. Expressions may be used containing ^*/+- as needed. No whitespace may appear in numeric expressions, now between the numeric expression and the colon.</p><h2 class="Heading_20_2"><a id="a__Message_Format"><span/></a>Message Format</h2><p class="Text_20_body">Messages sent by the device on the service channel must consist of a set of <span class="T6">datums</span><span class="T9">, wherin each datum is a data point from a certain signal, and is preceded by it's signal number.</span></p><p class="P7">For example. A DAQ service channel with the modifier bytes:</p><h2 class="P17"><a id="a__u16_Voltage_in_mV"><span/></a>u16 Voltage in mV                     </h2><p class="P14">Might send a message consisting of a zero, indicating signal 0, followed by the two bytes of the 16 bit unsigned int, followed by the signal number and data for signal 0(if one existed), etc.</p><p class="P14"> </p><p class="P14">Devices may send one or many datum points in this way, and are not required to send all points.</p><h2 class="Heading_20_2"><a id="a__WBTV_6__DAQ_Service_ExtensionsIntroduction"><span/></a><!--Next 'div' is emulating the top hight of a draw:frame.--><div style="height:0.0279cm;"> </div><!--Next '
			div' is a draw:frame.
		--><div style="width:7.0173in; padding:0;  float:left; position:relative; left:-0.1709cm; " class="fr2" id="Frame6"><!--Next 'div' was a 'draw:text-box'.--><div style="min-height:0.2744in;"><h1 class="Heading_20_1"><a id="a__WBTV_6__DAQ_Service_Extensions"><span/></a>WBTV 6: DAQ Service Extensions</h1></div></div><div style="clear:both; line-height:0; width:0; height:0; margin:0; padding:0;"> </div>Introduction</h2><p class="Text_20_body">WBTV5 Defines a service allowing devices to act as data acquisition units. This document defines extensions to the DAQ service as defined in WBTV5.</p><p class="P5">Where legally possible, I place this document and protocol into the Public Domain. Elsewhere I release this work under the Creative Commons Zero License.</p><h2 class="Heading_20_2"><a id="a__Bit_Arrays"><span/></a>Bit Arrays</h2><p class="Text_20_body">A bit array is a field with type bits8, bits16,bits32, or bits64.</p><p class="Text_20_body">They are logically the same as unsigned integers, but are intended to be interpreted as packed boolean arrays.</p><p class="Text_20_body">Should the “in” keyword be used to give an interpretation to the data, the interpretation should consist  of a comma separated list, containing no whitespace, giving a name to each bit in the bit array, with the first name applying to the least significant bit. Example:</p><h2 class="Code"><a id="a__bits8_buttons_in_A_B_X_Y_L_R_S_s"><span/></a>bits8 buttons in A,B,X,Y,L,R,S,s</h2><p class="Standard">Represents one byte, representing the values of 8 buttons, as one might find on a game controller.</p><p class="Standard"> </p><p class="Standard">When the device sends it's values, a 1 in any bit position should be used to represent True, and a 0 should be used to represent False.</p><p class="Standard"> </p><h2 class="Heading_20_2"><a id="a__The_Output_Control_Service"><span/></a>The Output Control Service</h2><p class="Text_20_body">The output control service is a service used to allow a device to act as an output in the same way as the DAQ service allows devices to act as inputs.</p><p class="P21">UUID(Hex):</p><p class="P20">0xCAEDB14E0D8611E4B78578F31D5D46B0</p><p class="Text_20_body">The output control service has identical semantics to the input service, except the device listens instead of transmits on the channel.</p><p class="Text_20_body">The modifier bits are used as in the DAQ service to define a set of signals in an identical manner.</p><p class="Text_20_body">For example:</p><p class="Text_20_body"> </p><h2 class="Code"><a id="a__u8_brightness"><span/></a>u8 brightness</h2><p class="Standard">When found in the modifier bits of a Output Control Service Channel would mean the device was listening for a message on that channel containing a 8 bit value in signal 0, which the device would use to set the brightness of some light, presumably.</p><p class="Standard"> </p><p class="Standard">A message sent on that channel might contain:</p><p class="Standard"> </p><h2 class="Code"><a id="a__0x00__0xff"><span/></a>0x00, 0xff</h2><p class="Standard">To tell the device to go to full brightness.</p><p class="Standard"> </p><p class="Standard">Or:</p><h2 class="Code"><a id="a__0x00__0x00"><span/></a>0x00, 0x00</h2><p class="Standard">To turn the light off.</p><p class="Standard"> </p><p class="Standard"> </p><p class="Standard"> </p><p class="Standard"> </p><p class="Standard"> </p><p class="Standard"> </p><p class="Standard"> </p><p class="Standard"> </p><p class="Standard"> </p><p class="Standard"> </p><p class="Standard"> </p><p class="Standard"> </p><p class="Standard"> </p><p class="Standard"> </p><p class="Standard"> </p><p class="Standard"> </p><h2 class="Heading_20_2"><a id="a__WBTV_7__Stage_Light_Control_Introduction"><span/></a><!--Next 'div' is emulating the top hight of a draw:frame.--><div style="height:0.0759cm;"> </div><!--Next '
			div' is a draw:frame.
		--><div style="width:7.0173in; padding:0;  float:left; position:relative; left:-0.2959cm; " class="fr2" id="Frame7"><!--Next 'div' was a 'draw:text-box'.--><div style="min-height:0.2744in;"><h1 class="Heading_20_1"><a id="a__WBTV_7__Stage_Light_Control"><span/></a>WBTV 7: Stage Light Control </h1></div></div><div style="clear:both; line-height:0; width:0; height:0; margin:0; padding:0;"> </div>Introduction</h2><p class="Text_20_body">The WBTV Stage light control protocol provides a standard way to control stage lighting appliances, and a way for them to provide information about themselves using a WBTV4 Service Channel.</p><p class="Text_20_body">The general model is an array of 2**16 8 bit values, which may be set, or smoothly faded.</p><p class="Text_20_body">Each device listens to a range of values determined by it's “start code”, the first value in it's range of addresses to listen to, set in a device-specific manner such as via a special channel or with DIP switches.</p><p class="Text_20_body">Each device only needs to store info about the channels it listens to, but for efficiency, one may write to the imaginary shared space of addresses as if a single device were listening.</p><p class="P5">Where legally possible, I place this document and protocol into the Public Domain. Elsewhere I release this work under the Creative Commons Zero License.</p><h2 class="Heading_20_2"><a id="a__The_STAGE_Channel"><span/></a>The STAGE Channel</h2><p class="Text_20_body">This channel is used to set and fade lighting values. Messages are a stream of commands, where each command has a command byte followed by any arguments. Devices should halt and discard the remainder upon encountering an unknown command. </p><p class="Text_20_body">The total length of a STAGE message should be under 128 bytes.</p><p class="Text_20_body">Compatible devices receiving a STAGE message should execute the commands sequentially, and ignore all values written or faded that do not overlap their range.</p><p class="P18">Devices should internally use as many bits of precision as possible for the smoothest fading.</p><p class="Text_20_body"> </p><h2 class="Heading_20_2"><a id="a__Commands"><span/></a>Commands</h2><h3 class="Heading_20_3"><a id="a__0x00_Set_Values"><span/></a>0x00 Set Values</h3><p class="Text_20_body">This command directly writes to the virtual 2**16  byte space. Structure(first part at the top):</p><table border="0" cellspacing="0" cellpadding="0" class="Table2"><colgroup><col width="136"/><col width="237"/></colgroup><tr><td style="text-align:left;width:1.2278in; " class="Table2_A1"><p class="Text_20_body">Fixed uint8 0x00</p></td><td style="text-align:left;width:2.1347in; " class="Table2_B1"><p class="Text_20_body"> Command Code </p></td></tr><tr><td style="text-align:left;width:1.2278in; " class="Table2_A2"><p class="Text_20_body">Uint16 spos</p></td><td style="text-align:left;width:2.1347in; " class="Table2_B2"><p class="Text_20_body"> Start Position</p></td></tr><tr><td style="text-align:left;width:1.2278in; " class="Table2_A2"><p class="Text_20_body">Uint8 valcount</p></td><td style="text-align:left;width:2.1347in; " class="Table2_B2"><p class="Text_20_body"> Number of values to write</p></td></tr><tr><td style="text-align:left;width:1.2278in; " class="Table2_A2"><p class="Text_20_body">uint8*N data</p></td><td style="text-align:left;width:2.1347in; " class="Table2_B2"><p class="Text_20_body"> Values to be written</p></td></tr></table><p class="Text_20_body"> </p><p class="Text_20_body">Where the length of data is valcount. <span class="T14">Any fades on any values not referenced in the command should be unaffected.</span></p><p class="Text_20_body"> </p><h3 class="Heading_20_3"><a id="a__0x01_Fade_Values"><span/></a>0x01 Fade Values</h3><p class="Text_20_body">This command begins a fade from the current values to the new values over a period of time.</p><p class="Text_20_body">Structure:</p><table border="0" cellspacing="0" cellpadding="0" class="Table3"><colgroup><col width="139"/><col width="234"/></colgroup><tr><td style="text-align:left;width:1.25in; " class="Table3_A1"><p class="Text_20_body">Fixed uint8 0x01</p></td><td style="text-align:left;width:2.1125in; " class="Table3_B1"><p class="Text_20_body">command code</p></td></tr><tr><td style="text-align:left;width:1.25in; " class="Table3_A2"><p class="Text_20_body">uint16 spos</p></td><td style="text-align:left;width:2.1125in; " class="Table3_B2"><p class="Text_20_body">Start Address</p></td></tr><tr><td style="text-align:left;width:1.25in; " class="Table3_A2"><p class="Text_20_body">uint8 valcount</p></td><td style="text-align:left;width:2.1125in; " class="Table3_B2"><p class="Text_20_body">Number of values to write</p></td></tr><tr><td style="text-align:left;width:1.25in; " class="Table3_A2"><p class="Text_20_body">uint8 duration</p></td><td style="text-align:left;width:2.1125in; " class="Table3_B2"><p class="Text_20_body">Fade duration in 48ths of a second</p></td></tr><tr><td style="text-align:left;width:1.25in; " class="Table3_A2"><p class="Text_20_body">uint8*N data</p></td><td style="text-align:left;width:2.1125in; " class="Table3_B2"><p class="Text_20_body"> Fade destination values</p></td></tr></table><p class="Text_20_body"> </p><p class="Text_20_body">Causes <span class="T6">valcount </span><span class="T9">values starting at </span><span class="T6">spos </span><span class="T9">to fade from their current  values to the destination values specified in data.</span></p><p class="P7">Any fades on any values not included in the command should continue unaffected.</p><p class="P7">Where the concept of a fade is nonsensical, such as on-off only lights, fades may be ignored.</p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><h2 class="P22"><a id="a__WBTV_8__Stage_Light_Control_ExtensionsIntroduction"><span/></a><!--Next 'div' is emulating the top hight of a draw:frame.--><div style="height:0.049cm;"> </div><!--Next '
			div' is a draw:frame.
		--><div style="width:7.0173in; padding:0;  float:left; position:relative; left:-0.2131cm; " class="fr2" id="Frame8"><!--Next 'div' was a 'draw:text-box'.--><div style="min-height:0.2744in;"><h1 class="Heading_20_1"><a id="a__WBTV_8__Stage_Light_Control_Extensions"><span/></a>WBTV <span class="T15">8</span>: Stage Light Control <span class="T15">Extensions</span></h1></div></div><div style="clear:both; line-height:0; width:0; height:0; margin:0; padding:0;"> </div>Introduction</h2><p class="P26">The WBTV STAGE protocol defines a way of controlling lighting fixtures. This document defines an extension to the STAGE protocol allowing higher resolution control.</p><p class="P27">Where legally possible, I place this document and protocol into the Public Domain. Elsewhere I release this work under the Creative Commons Zero License.</p><p class="P26"> </p><h2 class="P22"><a id="a__Labeling"><span/></a>Labeling</h2><p class="P26">Devices that are compatible with the STAGE protocol as laid out in WBTV 7 should be labeled as supporting “WBTV STAGE”. Devices also supporting all features of this document should be labeled as supporting “WBTV STAGE 2”. STAGE 2 devices must also support all commands of WBTV 7.</p><p class="P26"> </p><h2 class="P22"><a id="a__16_bit_commands"><span/></a>16 bit commands</h2><p class="P37"><span class="T15">16 bit STAGE commands use the same value space array as 8 bit commands. A write or fade to channel 5 should do exactly the same thing in 16 or 8 bit mode, besides the higher resolution.</span></p><p class="P30"> </p><p class="P26">Where possible, fades between 8 bit values should be handled internally as 16 bits for maximum smoothness.</p><p class="P30"> </p><p class="P30"> </p><p class="P30"> </p><p class="P30"> </p><p class="P30"> </p><p class="P30"> </p><p class="P30"> </p><p class="P30"> </p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><h2 class="P23"><a id="a__Commands"><span/></a>Commands</h2><h3 class="P47"><a id="a__0x02_16_bit_Set_Values"><span/></a>0x0<span class="T15">2</span> <span class="T15">16 bit </span>Set Values</h3><p class="P30">This command directly writes to the virtual 2**16  byte space. Structure(first part at the top):</p><table border="0" cellspacing="0" cellpadding="0" class="Table4"><colgroup><col width="136"/><col width="237"/></colgroup><tr><td style="text-align:left;width:1.2278in; " class="Table4_A1"><p class="P30">Fixed uint8 0x00</p></td><td style="text-align:left;width:2.1347in; " class="Table4_B1"><p class="P30"> Command Code </p></td></tr><tr><td style="text-align:left;width:1.2278in; " class="Table4_A2"><p class="P30">Uint16 spos</p></td><td style="text-align:left;width:2.1347in; " class="Table4_B2"><p class="P30"> Start Position</p></td></tr><tr><td style="text-align:left;width:1.2278in; " class="Table4_A2"><p class="P30">Uint8 valcount</p></td><td style="text-align:left;width:2.1347in; " class="Table4_B2"><p class="P30"> Number of values to write</p></td></tr><tr><td style="text-align:left;width:1.2278in; " class="Table4_A2"><p class="P30">Uint<span class="T15">16 </span>*N data</p></td><td style="text-align:left;width:2.1347in; " class="Table4_B2"><p class="P30"> Values to be written</p></td></tr></table><p class="P30"> </p><p class="P30">Where the length of data is valcount. <span class="T14">Any fades on any values not referenced in the command should be unaffected.</span></p><p class="P30"> </p><h3 class="P47"><a id="a__0x03_16_bit_Fade_Values"><span/></a>0x0<span class="T15">3</span> <span class="T15">16 bit </span>Fade Values</h3><p class="P30">This command begins a fade from the current values to the new values over a period of time.</p><p class="P30">Structure:</p><table border="0" cellspacing="0" cellpadding="0" class="Table5"><colgroup><col width="139"/><col width="234"/></colgroup><tr><td style="text-align:left;width:1.25in; " class="Table5_A1"><p class="P30">Fixed uint8 0x01</p></td><td style="text-align:left;width:2.1125in; " class="Table5_B1"><p class="P30">command code</p></td></tr><tr><td style="text-align:left;width:1.25in; " class="Table5_A2"><p class="P30">uint16 spos</p></td><td style="text-align:left;width:2.1125in; " class="Table5_B2"><p class="P30">Start Address</p></td></tr><tr><td style="text-align:left;width:1.25in; " class="Table5_A2"><p class="P30">uint8 valcount</p></td><td style="text-align:left;width:2.1125in; " class="Table5_B2"><p class="P30">Number of values to write</p></td></tr><tr><td style="text-align:left;width:1.25in; " class="Table5_A2"><p class="P30">uint8 duration</p></td><td style="text-align:left;width:2.1125in; " class="Table5_B2"><p class="P30">Fade duration in 48ths of a second</p></td></tr><tr><td style="text-align:left;width:1.25in; " class="Table5_A2"><p class="P30">uint<span class="T15">16</span>*N data</p></td><td style="text-align:left;width:2.1125in; " class="Table5_B2"><p class="P30"> Fade destination values</p></td></tr></table><p class="P30"> </p><p class="P30">Causes <span class="T6">valcount </span><span class="T9">values starting at </span><span class="T6">spos </span><span class="T9">to fade from their current  values to the destination values specified in data.</span></p><p class="P29">Any fades on any values not included in the command should continue unaffected.</p><p class="P29">Where the concept of a fade is nonsensical, such as on-off only lights, fades may be ignored.</p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><p class="Text_20_body"> </p><!--Next 'div' was a 'text:p'.--><div class="Text_20_body"><!--Next 'div' is emulating the top hight of a draw:frame.--><div style="height:0.046cm;"> </div><!--Next '
			div' is a draw:frame.
		--><div style="width:7.0173in; padding:0;  float:left; position:relative; left:-0.046cm; " class="fr2" id="Frame9"><!--Next 'div' was a 'draw:text-box'.--><div style="min-height:0.2744in;"><h1 class="Heading_20_1"><a id="a__WBTV_9__Misc"><span/></a>WBTV <span class="T16">9</span>: Misc</h1></div></div></div><div style="clear:both; line-height:0; width:0; height:0; margin:0; padding:0;"> </div><h2 class="Heading_20_2"><a id="a__Introduction"><span/></a><span class="T12">I</span>ntroduction</h2><p class="Text_20_body">This Document defines assorted things.</p><p class="P5">Where legally possible, I place this document and protocol into the Public Domain. Elsewhere I release this work under the Creative Commons Zero License.</p><p class="P5"> </p><h2 class="Heading_20_2"><a id="a__The_RAND_channel"><span/></a>The RAND channel</h2><p class="Text_20_body">The RAND channel is to be used for random numbers. Hardware RNG devices may send random bytes on this channel, but only high quality, whitened bytes such as produced by radioactive decay or diode noise. Messages can contain<span class="T14"> 1-64 random bytes.</span></p><p class="Text_20_body"> </p><h2 class="Heading_20_2"><a id="a__The_TZOS_Channel"><span/></a>The TZOS Channel</h2><p class="Text_20_body">This channel allows a device to broadcast the time offset from UTC of any time zone. Messages should consist of the time zone name(as in “US/Pacific”, followed by the current offset from UTC(The number that, when added to UTC, would produce the time in the time zone), as a 32 bit integer.</p><p class="Text_20_body">This may optionally be followed by another 32 bit integer containing the UNIX timestamp of a future time, followed by the time offset at that time.</p><h2 class="Heading_20_2"><a id="a__The_TZRQ_channel"><span/></a>The TZRQ channel</h2><p class="Text_20_body">Allows a device to request the time in a specified  time zone from any device that knows it. The message is simply the name of the time zone.</p><p class="Text_20_body"> </p><h2 class="P16"><a id="a__The_LCTZ_channel"><span/></a>The LCTZ channel</h2><p class="P31">Messages on this channel should be the name of the local time zone of the device that is sending the message, optionally followed by a NUL and </p><p class="P38"> </p><p class="P38"> </p><p class="P38">then the 32 bit integer offset from UTC in seconds of that zone.</p><p class="P10"> </p><h2 class="P16"><a id="a__The_Struct_In_Service_"><span/></a>The Struct In Service:</h2><p class="P10">This service allows a device to recieve data formatted as an unpadded C struct. The modifier bytes must be a valid C struct definition, which should contain comments. The struct may be named anything and should use standard typedefs(uint8_t,etc). Data sent to the device must be formatted as per the struct.</p><p class="P21">UUID:</p><p class="P20">0xDD452C900D8711E4813782F41D5D46B0</p><h2 class="P16"><a id="a__The_Struct_Out_Service_"><span/></a>The Struct Out Service:</h2><p class="P10">Same as the struct in service, except the device sends instead of receives the struct-formatted messages.</p><p class="P10">UUID:</p><p class="P32">0xED5690880D8711E4BA3289F41D5D46B0</p><p class="P32"> </p><p class="P32"> </p><p class="P32"> </p><p class="P32"> </p><p class="P32"> </p><p class="P32"> </p><p class="P32"> </p><p class="P32"> </p><p class="P32"> </p><p class="P32"> </p><p class="P32"> </p><p class="P32"> </p><p class="P32"> </p><p class="P32"> </p><p class="P32"> </p><p class="P32"> </p><p class="P32"> </p><p class="P32"> </p><p class="P32"> </p><p class="P32"> </p><h2 class="P24"><a id="a__WBTV_10__Physical_LayerIntroduction"><span/></a><!--Next 'div' is emulating the top hight of a draw:frame.--><div style="height:0.046cm;"> </div><!--Next '
			div' is a draw:frame.
		--><div style="width:7.0173in; padding:0;  float:left; position:relative; left:-0.046cm; " class="fr2" id="Frame10"><!--Next 'div' was a 'draw:text-box'.--><div style="min-height:0.2744in;"><h1 class="Heading_20_1"><a id="a__WBTV_10__Physical_Layer"><span/></a>WBTV <span class="T17">10</span>: <span class="T17">Physical Layer</span></h1></div></div><div style="clear:both; line-height:0; width:0; height:0; margin:0; padding:0;"> </div>Introduction</h2><p class="P42">This document defines several physical layer variants for WBTV.</p><p class="P39">Where legally possible, I place this document and protocol into the Public Domain. Elsewhere I release this work under the Creative Commons Zero License.</p><p class="P39"> </p><h2 class="P24"><a id="a__WBTV-A"><span/></a>WBTV-A</h2><p class="P42"><span class="T19">8-N-1 Serial carried over </span>CAN signaling levels, <span class="T19">where a logical 1 is represented by the idle or recessive state</span>, carried over CAT5 cable using normal RJ45 jacks.</p><p class="P33"> </p><table border="0" cellspacing="0" cellpadding="0" class="Table6"><colgroup><col width="187"/><col width="187"/></colgroup><tr><td style="text-align:left;width:1.6813in; " class="Table6_A1"><p class="P28">RJ45 Pin</p></td><td style="text-align:left;width:1.6813in; " class="Table6_B1"><p class="P40">Function</p></td></tr><tr><td style="text-align:left;width:1.6813in; " class="Table6_A2"><p class="P34">1</p></td><td style="text-align:left;width:1.6813in; " class="Table6_B2"><p class="P41">CAN_H</p></td></tr><tr><td style="text-align:left;width:1.6813in; " class="Table6_A2"><p class="P34">2         </p></td><td style="text-align:left;width:1.6813in; " class="Table6_B2"><p class="P41">CAN_L</p></td></tr><tr><td style="text-align:left;width:1.6813in; " class="Table6_A2"><p class="P34">3</p></td><td style="text-align:left;width:1.6813in; " class="Table6_B2"><p class="P41">Reserved</p></td></tr><tr><td style="text-align:left;width:1.6813in; " class="Table6_A2"><p class="P34">4</p></td><td style="text-align:left;width:1.6813in; " class="Table6_B2"><p class="P41">Reserved/<span class="T19">POWER</span></p></td></tr><tr><td style="text-align:left;width:1.6813in; " class="Table6_A2"><p class="P34">5</p></td><td style="text-align:left;width:1.6813in; " class="Table6_B2"><p class="P41">Reserved/<span class="T19">POWER</span></p></td></tr><tr><td style="text-align:left;width:1.6813in; " class="Table6_A2"><p class="P34">6</p></td><td style="text-align:left;width:1.6813in; " class="Table6_B2"><p class="P41">Reserved</p></td></tr><tr><td style="text-align:left;width:1.6813in; " class="Table6_A2"><p class="P34">7</p></td><td style="text-align:left;width:1.6813in; " class="Table6_B2"><p class="P41">GND</p></td></tr><tr><td style="text-align:left;width:1.6813in; " class="Table6_A2"><p class="P34">8</p></td><td style="text-align:left;width:1.6813in; " class="Table6_B2"><p class="P41">GND</p></td></tr></table><p class="P34"> </p><p class="P34">Both grounds should be connected <span class="T18">together. This provides protection against large ground offsets destroying devices.</span></p><p class="P34"> </p><p class="P36">If power is supplied, the total current on BOTH LINES combined is not to exceed 600ma, the voltage is not to exceed 32V with brief 35v transients allowed, </p><p class="P36"> </p><p class="P44"><span class="T21">D</span>evices must <span class="T21">be fully hot pluggable, and must </span>survive a hot plug to 32V via any amount of cable.</p><p class="P35"> </p><p class="P35">Devices with a “pass-through” port should pass through all pins directly unless a specific reason exists to do otherwise.</p><p class="P41"> </p><p class="P45">Devices must function properly with + or – 5 volts of offset between the grounds of two devices</p><p class="P43"> </p><p class="P43"><span class="T18">A</span>ny devices making use of the reserved pins for other purpose should be clearly labeled with what pins they use. Besides the use of 4 and 5 for power all use of reserved pins should be considered a site specific use.</p><p class="P43"> </p><p class="P43">Devices<span class="T20">(Including side-specific uses of reserved pins) </span>must sustain no damage from any combination of prolonged shorts between any pins, even with 35V power applied.<span class="T20"> </span></p><p class="P43"> </p><p class="P43">Any device capable of supplying current must be current limited to 600ma to prevent fire.</p><p class="P43"> </p><p class="P46">Devices requiring appreciable power should not draw current from the bus and should instead use an external power supply.</p><p class="P43"> </p><h2 class="P25"><a id="a__WBTV-B"><span/></a><span class="T18">W</span>BTV-B</h2><p class="P35">One wire with a pullup resistor of 3.3k to 100k to 3.3v, idle high, non inverted, 8-N-1, used as a wired-or bus in the manner of I2C. S</p><p class="P35"> </p><h2 class="P25"><a id="a__WBTB-USB"><span/></a>WBTB-USB</h2><p class="P35">Full-duplex(No CSMA) over a virtual USB COM port.</p><p class="P35"> </p><h2 class="P25"><a id="a__WBTV-U"><span/></a>WBTV-U</h2><p class="P35">Full duplex serial over standard TTL level signalling. Should be written with the voltage used(e.g. WBTV-U(5V)).</p><p class="P35"> </p></body></html>